<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction • threesixtygiving</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">threesixtygiving</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction.html">Introduction</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction</h1>
            
      
      
      <div class="hidden name"><code>introduction.Rmd</code></div>

    </div>

    
    
<p><em>Still a work in progress</em></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(threesixtygiving)</span></code></pre></div>
<div id="retrieve-all-grants" class="section level2">
<h2 class="hasAnchor">
<a href="#retrieve-all-grants" class="anchor"></a>Retrieve all grants</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>grants &lt;-<span class="st"> </span><span class="kw"><a href="../reference/tsg_all_grants.html">tsg_all_grants</a></span>(<span class="dt">timeout =</span> <span class="dv">8</span>, <span class="dt">retries =</span> <span class="dv">1</span>)</span></code></pre></div>
</div>
<div id="core-data" class="section level2">
<h2 class="hasAnchor">
<a href="#core-data" class="anchor"></a>Core data</h2>
<p><code>tsg_all_grants</code> returns a list of tibbles, due to differences in the data provided by each funder. <code>tsg_core_data</code> returns a tibble with the 10 columns in the <a href="https://standard.threesixtygiving.org/en/latest/#">360Giving Open Standard</a>, plus the publisher prefix used to identify each funder. In the case below I have converted non-GBP currencies to GBP on the rates on 2019-10-24.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(purrr)</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</span>
<span id="cb3-3"><a href="#cb3-3"></a></span>
<span id="cb3-4"><a href="#cb3-4"></a>df &lt;-<span class="st"> </span><span class="kw"><a href="../reference/tsg_core_data.html">tsg_core_data</a></span>(grants)</span>
<span id="cb3-5"><a href="#cb3-5"></a></span>
<span id="cb3-6"><a href="#cb3-6"></a>df2 &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">amount_awarded =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span>(</span>
<span id="cb3-8"><a href="#cb3-8"></a>    currency <span class="op">==</span><span class="st"> "USD"</span> <span class="op">~</span><span class="st"> </span>amount_awarded<span class="op">/</span><span class="fl">1.29</span>, <span class="co">## rate on 2019-10-24</span></span>
<span id="cb3-9"><a href="#cb3-9"></a>    currency <span class="op">==</span><span class="st"> "CAD"</span> <span class="op">~</span><span class="st"> </span>amount_awarded<span class="op">/</span><span class="fl">1.69</span>, </span>
<span id="cb3-10"><a href="#cb3-10"></a>    currency <span class="op">==</span><span class="st"> "CHF"</span> <span class="op">~</span><span class="st"> </span>amount_awarded<span class="op">/</span><span class="fl">1.28</span>, </span>
<span id="cb3-11"><a href="#cb3-11"></a>    currency <span class="op">==</span><span class="st"> "EUR"</span> <span class="op">~</span><span class="st"> </span>amount_awarded<span class="op">/</span><span class="fl">1.16</span>,</span>
<span id="cb3-12"><a href="#cb3-12"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span>amount_awarded)) <span class="op">%&gt;%</span></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(funding_org_name) <span class="op">%&gt;%</span></span>
<span id="cb3-14"><a href="#cb3-14"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(<span class="dt">n =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/n.html">n</a></span>(),</span>
<span id="cb3-15"><a href="#cb3-15"></a>            <span class="dt">amount_awarded =</span> <span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(amount_awarded)) <span class="op">%&gt;%</span></span>
<span id="cb3-16"><a href="#cb3-16"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">avg =</span> amount_awarded<span class="op">/</span>n)</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)</span>
<span id="cb4-2"><a href="#cb4-2"></a></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html">theme_set</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span>())</span>
<span id="cb4-4"><a href="#cb4-4"></a></span>
<span id="cb4-5"><a href="#cb4-5"></a>p1 &lt;-<span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(df2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_n</a></span>(<span class="dv">20</span>, amount_awarded) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="st">               </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">amount_awarded2 =</span> amount_awarded<span class="op">/</span><span class="dv">100000</span>),</span>
<span id="cb4-7"><a href="#cb4-7"></a>             <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span>(funding_org_name, <span class="op">-</span>amount_awarded2),</span>
<span id="cb4-8"><a href="#cb4-8"></a>                 <span class="dt">y =</span> amount_awarded2, <span class="dt">fill =</span> amount_awarded2)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_sqrt</a></span>(<span class="dt">labels =</span> scales<span class="op">::</span><span class="kw"><a href="https://scales.r-lib.org//reference/dollar_format.html">dollar_format</a></span>(<span class="dt">prefix =</span> <span class="st">"£"</span>),</span>
<span id="cb4-11"><a href="#cb4-11"></a>               <span class="dt">breaks =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1000</span>, <span class="dv">5000</span>, <span class="dv">10000</span>, <span class="dv">25000</span>, <span class="dv">50000</span>, <span class="dv">75000</span>, <span class="dv">100000</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html">scale_x_discrete</a></span>(<span class="dt">labels =</span> scales<span class="op">::</span><span class="kw"><a href="https://scales.r-lib.org//reference/wrap_format.html">wrap_format</a></span>(<span class="dv">30</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb4-13"><a href="#cb4-13"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_fill_viridis_c</a></span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="dt">x =</span> <span class="st">"Funder"</span>, <span class="dt">y =</span> <span class="st">"Amount Awarded </span></span>
<span id="cb4-15"><a href="#cb4-15"></a><span class="st">       (in 100,000s, note logarithmic scale)"</span>,</span>
<span id="cb4-16"><a href="#cb4-16"></a>       <span class="dt">title =</span> <span class="st">"Total Value of Grants Awarded by Twenty Largest Funders"</span>,</span>
<span id="cb4-17"><a href="#cb4-17"></a>       <span class="dt">caption =</span> <span class="st">"(c) Evan Odell | 2019 | CC-BY-SA</span></span>
<span id="cb4-18"><a href="#cb4-18"></a><span class="st">       Data from 360Giving"</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb4-19"><a href="#cb4-19"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(<span class="dt">axis.text.x =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>, <span class="dt">size =</span> <span class="dv">8</span>),</span>
<span id="cb4-20"><a href="#cb4-20"></a>        <span class="dt">legend.position =</span> <span class="st">"none"</span>) </span>
<span id="cb4-21"><a href="#cb4-21"></a>  </span>
<span id="cb4-22"><a href="#cb4-22"></a>p1</span></code></pre></div>
<p><img src="total-value.png"></p>
<p>The plot below shows the average grant value from each funder, with the number of reported grants given by each funder.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggrepel)</span>
<span id="cb5-3"><a href="#cb5-3"></a></span>
<span id="cb5-4"><a href="#cb5-4"></a>p2 &lt;-<span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(df2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_n</a></span>(<span class="dv">20</span>, amount_awarded),</span>
<span id="cb5-5"><a href="#cb5-5"></a>             <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span>(funding_org_name, <span class="op">-</span>avg),</span>
<span id="cb5-6"><a href="#cb5-6"></a>                 <span class="dt">y =</span> avg, <span class="dt">fill =</span> avg)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/ggrepel/man/geom_text_repel.html">geom_label_repel</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">label =</span> scales<span class="op">::</span><span class="kw"><a href="https://scales.r-lib.org//reference/number_format.html">comma</a></span>(n)), <span class="dt">nudge_y =</span> <span class="dv">1</span>,</span>
<span id="cb5-9"><a href="#cb5-9"></a>              <span class="dt">alpha =</span> <span class="fl">0.35</span>, <span class="dt">size =</span> <span class="fl">3.25</span>, <span class="dt">hjust =</span><span class="fl">0.5</span>, <span class="dt">direction =</span> <span class="st">"y"</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_sqrt</a></span>(<span class="dt">labels =</span> scales<span class="op">::</span><span class="kw"><a href="https://scales.r-lib.org//reference/dollar_format.html">dollar_format</a></span>(<span class="dt">prefix =</span> <span class="st">"£"</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html">scale_x_discrete</a></span>(<span class="dt">labels =</span> scales<span class="op">::</span><span class="kw"><a href="https://scales.r-lib.org//reference/wrap_format.html">wrap_format</a></span>(<span class="dv">25</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_fill_viridis_c</a></span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="dt">x =</span> <span class="st">"Funder"</span>, <span class="dt">y =</span> <span class="st">"Average Grant Value"</span>,</span>
<span id="cb5-14"><a href="#cb5-14"></a>       <span class="dt">title =</span> <span class="st">"Average Grant Value"</span>,</span>
<span id="cb5-15"><a href="#cb5-15"></a>       <span class="dt">subtitle =</span> <span class="st">"Label is the total number of grants awarded"</span>,</span>
<span id="cb5-16"><a href="#cb5-16"></a>       <span class="dt">caption =</span> <span class="st">"(c) Evan Odell | 2019 | CC-BY-SA</span></span>
<span id="cb5-17"><a href="#cb5-17"></a><span class="st">       Data from 360Giving"</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb5-18"><a href="#cb5-18"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(<span class="dt">axis.text.x =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>, <span class="dt">size =</span> <span class="dv">8</span>),</span>
<span id="cb5-19"><a href="#cb5-19"></a>        <span class="dt">legend.position =</span> <span class="st">"none"</span>) </span>
<span id="cb5-20"><a href="#cb5-20"></a></span>
<span id="cb5-21"><a href="#cb5-21"></a>p2</span></code></pre></div>
<p><img src="avg-grant-value.png"></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a></span>
<span id="cb6-2"><a href="#cb6-2"></a>p3 &lt;-<span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(df2, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> n, <span class="dt">y =</span> avg, <span class="dt">colour =</span> amount_awarded)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="dt">alpha =</span> <span class="fl">0.7</span>, <span class="dt">size =</span> <span class="dv">4</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/ggrepel/man/geom_text_repel.html">geom_text_repel</a></span>(<span class="dt">data =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span>(df2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_n</a></span>(<span class="dv">5</span>, avg),</span>
<span id="cb6-5"><a href="#cb6-5"></a>                                   df2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_n</a></span>(<span class="dv">5</span>, amount_awarded),</span>
<span id="cb6-6"><a href="#cb6-6"></a>                                   df2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_n</a></span>(<span class="dv">5</span>, n),</span>
<span id="cb6-7"><a href="#cb6-7"></a>                                   df2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_n</a></span>(<span class="dv">5</span>, <span class="op">-</span>n),</span>
<span id="cb6-8"><a href="#cb6-8"></a>                                   df2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_n</a></span>(<span class="dv">5</span>, <span class="op">-</span>amount_awarded)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="st">                    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span>(),</span>
<span id="cb6-10"><a href="#cb6-10"></a>                  <span class="dt">mapping =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">label =</span> funding_org_name), <span class="dt">colour =</span> <span class="st">"black"</span>,</span>
<span id="cb6-11"><a href="#cb6-11"></a>                  <span class="dt">direction =</span> <span class="st">"both"</span>,</span>
<span id="cb6-12"><a href="#cb6-12"></a>                  <span class="dt">arrow =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/reexports.html">arrow</a></span>(<span class="dt">length =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/reexports.html">unit</a></span>(<span class="fl">0.03</span>, <span class="st">"npc"</span>), <span class="dt">type =</span> <span class="st">"open"</span>, <span class="dt">ends =</span> <span class="st">"last"</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_colour_viridis_c</a></span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb6-14"><a href="#cb6-14"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_log10</a></span>(<span class="dt">labels =</span> scales<span class="op">::</span><span class="kw"><a href="https://scales.r-lib.org//reference/dollar_format.html">dollar_format</a></span>(<span class="dt">prefix =</span> <span class="st">"£"</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb6-15"><a href="#cb6-15"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_log10</a></span>(<span class="dt">labels =</span> scales<span class="op">::</span>comma) <span class="op">+</span><span class="st"> </span></span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="dt">y =</span> <span class="st">"Average Grant Value"</span>, <span class="dt">x =</span> <span class="st">"Number of Grants"</span>,</span>
<span id="cb6-17"><a href="#cb6-17"></a>       <span class="dt">title =</span> <span class="st">"Average Grant Value vs Number of Grants"</span>,</span>
<span id="cb6-18"><a href="#cb6-18"></a>       <span class="dt">caption =</span> <span class="st">"(c) Evan Odell | 2019 | CC-BY-SA</span></span>
<span id="cb6-19"><a href="#cb6-19"></a><span class="st">       Data from 360Giving"</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb6-20"><a href="#cb6-20"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(<span class="dt">legend.position =</span> <span class="st">"none"</span>) </span>
<span id="cb6-21"><a href="#cb6-21"></a></span>
<span id="cb6-22"><a href="#cb6-22"></a>p3</span></code></pre></div>
<p>In the the plot below I’ve highlighted funders that make very many or very few grants, and that are either very large or very small.</p>
<p><img src="grant-size-n.png"></p>
<div id="award-sizes" class="section level3">
<h3 class="hasAnchor">
<a href="#award-sizes" class="anchor"></a>Award sizes</h3>
<p>In the two examples below, we can see differences between the amount of money applied for and the amount awarded. Not every funder reports the amount applied for, and some report what seem like placeholder values, such as grant programmes where applicants do not need to specify the value of the grant, only what they want to do and leave the award amount up to the funder.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>proc_df &lt;-<span class="st"> </span><span class="kw"><a href="../reference/tsg_process_data.html">tsg_process_data</a></span>(grants) </span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a>proc_amount_df &lt;-<span class="st"> </span>proc_df  <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(identifier, title, description, funding_org_name,</span>
<span id="cb7-5"><a href="#cb7-5"></a>         amount_awarded, amount_applied_for) <span class="op">%&gt;%</span></span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html">mutate_at</a></span>(<span class="dt">.vars =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/vars.html">vars</a></span>(amount_awarded, amount_applied_for), as.numeric) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">difference =</span> amount_awarded<span class="op">-</span>amount_applied_for,</span>
<span id="cb7-8"><a href="#cb7-8"></a>         <span class="dt">percentage_of =</span> amount_awarded<span class="op">/</span>amount_applied_for) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(amount_applied_for), amount_applied_for <span class="op">&gt;</span><span class="st"> </span><span class="dv">2500</span>,</span>
<span id="cb7-10"><a href="#cb7-10"></a>         amount_awarded <span class="op">&gt;</span><span class="st"> </span><span class="dv">2500</span>,</span>
<span id="cb7-11"><a href="#cb7-11"></a>         <span class="kw"><a href="https://dplyr.tidyverse.org/reference/ranking.html">percent_rank</a></span>(difference) <span class="op">&gt;=</span><span class="st"> </span><span class="fl">0.02</span> <span class="op">&amp;</span></span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="st">           </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/ranking.html">percent_rank</a></span>(difference) <span class="op">&lt;=</span><span class="st"> </span><span class="fl">0.98</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">## remove outliers</span></span>
<span id="cb7-13"><a href="#cb7-13"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">difference =</span> <span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(difference))</span>
<span id="cb7-14"><a href="#cb7-14"></a></span>
<span id="cb7-15"><a href="#cb7-15"></a>count0 &lt;-<span class="st"> </span>proc_amount_df <span class="op">%&gt;%</span></span>
<span id="cb7-16"><a href="#cb7-16"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(difference<span class="op">==</span><span class="dv">0</span>) <span class="op">%&gt;%</span></span>
<span id="cb7-17"><a href="#cb7-17"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">tally</a></span>()</span>
<span id="cb7-18"><a href="#cb7-18"></a>  </span>
<span id="cb7-19"><a href="#cb7-19"></a>p4 &lt;-<span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(proc_amount_df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(difference <span class="op">!=</span><span class="st"> </span><span class="dv">0</span>),</span>
<span id="cb7-20"><a href="#cb7-20"></a>             <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> difference)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb7-21"><a href="#cb7-21"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_freqpoly</a></span>(<span class="dt">bins =</span> <span class="dv">100</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb7-22"><a href="#cb7-22"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/ggrepel/man/geom_text_repel.html">geom_label_repel</a></span>(</span>
<span id="cb7-23"><a href="#cb7-23"></a>    <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> <span class="dv">0</span>, <span class="dt">y =</span> <span class="dv">4000</span>,</span>
<span id="cb7-24"><a href="#cb7-24"></a>        <span class="dt">label =</span> <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(scales<span class="op">::</span><span class="kw"><a href="https://scales.r-lib.org//reference/number_format.html">comma</a></span>(n),</span>
<span id="cb7-25"><a href="#cb7-25"></a>                       <span class="st">" applications awarded exact amount applied for"</span>)),</span>
<span id="cb7-26"><a href="#cb7-26"></a>    <span class="dt">data =</span> count0) <span class="op">+</span><span class="st"> </span></span>
<span id="cb7-27"><a href="#cb7-27"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_color_viridis_c</a></span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb7-28"><a href="#cb7-28"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span>(<span class="dt">labels =</span> scales<span class="op">::</span>comma) <span class="op">+</span><span class="st"> </span></span>
<span id="cb7-29"><a href="#cb7-29"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span>(<span class="dt">labels =</span> scales<span class="op">::</span><span class="kw"><a href="https://scales.r-lib.org//reference/dollar_format.html">dollar_format</a></span>(<span class="dt">prefix =</span> <span class="st">"£"</span>),</span>
<span id="cb7-30"><a href="#cb7-30"></a>                     <span class="dt">breaks =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="op">-</span><span class="dv">20000</span>, <span class="dv">-10000</span>, <span class="dv">-5000</span>, <span class="dv">-2500</span>,</span>
<span id="cb7-31"><a href="#cb7-31"></a>                                <span class="dv">0</span>, <span class="dv">2500</span>, <span class="dv">5000</span>, <span class="dv">7500</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb7-32"><a href="#cb7-32"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="dt">x =</span> <span class="st">"Difference between Award and Application Amount"</span>,</span>
<span id="cb7-33"><a href="#cb7-33"></a>       <span class="dt">y =</span> <span class="st">"Number of Grants"</span>)</span>
<span id="cb7-34"><a href="#cb7-34"></a></span>
<span id="cb7-35"><a href="#cb7-35"></a>p4</span></code></pre></div>
<p><img src="grant-diff-value.png"></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>p5 &lt;-<span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(proc_amount_df <span class="op">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="st">               </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(difference <span class="op">!=</span><span class="st"> </span><span class="dv">0</span>, percentage_of <span class="op">!=</span><span class="st"> </span><span class="ot">Inf</span>),</span>
<span id="cb8-3"><a href="#cb8-3"></a>             <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> percentage_of)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_freqpoly</a></span>(<span class="dt">bins =</span> <span class="dv">200</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/ggrepel/man/geom_text_repel.html">geom_label_repel</a></span>(</span>
<span id="cb8-6"><a href="#cb8-6"></a>    <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> <span class="dv">1</span>, <span class="dt">y =</span> <span class="dv">3000</span>, <span class="dt">hjust =</span> <span class="dv">1</span>,</span>
<span id="cb8-7"><a href="#cb8-7"></a>        <span class="dt">label =</span> <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(scales<span class="op">::</span><span class="kw"><a href="https://scales.r-lib.org//reference/number_format.html">comma</a></span>(n),</span>
<span id="cb8-8"><a href="#cb8-8"></a>                       <span class="st">" applications awarded exact amount applied for"</span>)),</span>
<span id="cb8-9"><a href="#cb8-9"></a>    <span class="dt">data =</span> count0) <span class="op">+</span><span class="st"> </span></span>
<span id="cb8-10"><a href="#cb8-10"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_color_viridis_c</a></span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb8-11"><a href="#cb8-11"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span>(<span class="dt">labels =</span> scales<span class="op">::</span>comma) <span class="op">+</span><span class="st"> </span></span>
<span id="cb8-12"><a href="#cb8-12"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span>(<span class="dt">labels =</span> scales<span class="op">::</span>percent,</span>
<span id="cb8-13"><a href="#cb8-13"></a>                     <span class="dt">breaks =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>,<span class="fl">0.9</span>, <span class="dv">1</span>, <span class="fl">1.25</span>, <span class="fl">1.5</span>, <span class="dv">2</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb8-14"><a href="#cb8-14"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="dt">x =</span> <span class="st">"Award size as percentage of amount applied for"</span>,</span>
<span id="cb8-15"><a href="#cb8-15"></a>       <span class="dt">y =</span> <span class="st">"Number of Grants"</span>)</span>
<span id="cb8-16"><a href="#cb8-16"></a></span>
<span id="cb8-17"><a href="#cb8-17"></a>p5</span></code></pre></div>
<p><img src="grant-diff-perc.png"></p>
</div>
<div id="systemic-change-funders" class="section level3">
<h3 class="hasAnchor">
<a href="#systemic-change-funders" class="anchor"></a>Systemic change funders</h3>
<p>Organisations that are focused on systemic change and policy-influencing seem to be particularly reliant on trusts and foundations for income, as their work is harder to sell to ordinary members of the public motivated by emotional connections with an issue, and see their money going to directly help an identifiable person.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>proc_df &lt;-<span class="st"> </span><span class="kw"><a href="../reference/tsg_process_data.html">tsg_process_data</a></span>(grants)</span>
<span id="cb9-2"><a href="#cb9-2"></a></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(stringr)</span>
<span id="cb9-4"><a href="#cb9-4"></a></span>
<span id="cb9-5"><a href="#cb9-5"></a>strat_df &lt;-<span class="st"> </span>proc_df <span class="op">%&gt;%</span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter_all.html">filter_at</a></span>(<span class="dt">.vars =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/vars.html">vars</a></span>(description, title, <span class="kw"><a href="https://tidyr.tidyverse.org/reference/reexports.html">contains</a></span>(<span class="st">"primary"</span>),</span>
<span id="cb9-7"><a href="#cb9-7"></a>                         <span class="kw"><a href="https://tidyr.tidyverse.org/reference/reexports.html">contains</a></span>(<span class="st">"impact"</span>), <span class="kw"><a href="https://tidyr.tidyverse.org/reference/reexports.html">contains</a></span>(<span class="st">"category"</span>),</span>
<span id="cb9-8"><a href="#cb9-8"></a>                         <span class="kw"><a href="https://tidyr.tidyverse.org/reference/reexports.html">contains</a></span>(<span class="st">"classificat"</span>)),</span>
<span id="cb9-9"><a href="#cb9-9"></a>            <span class="dt">.vars_predicate =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/all_vars.html">any_vars</a></span>(</span>
<span id="cb9-10"><a href="#cb9-10"></a>              <span class="kw"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span>(., <span class="kw"><a href="https://stringr.tidyverse.org/reference/modifiers.html">regex</a></span>(<span class="st">'strategy|strategic|systemic'</span>, </span>
<span id="cb9-11"><a href="#cb9-11"></a>                                  <span class="dt">ignore_case=</span><span class="ot">TRUE</span>))</span>
<span id="cb9-12"><a href="#cb9-12"></a>              )) <span class="op">%&gt;%</span></span>
<span id="cb9-13"><a href="#cb9-13"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(amount_awarded <span class="op">&gt;=</span><span class="st"> </span><span class="dv">2500</span>) </span>
<span id="cb9-14"><a href="#cb9-14"></a></span>
<span id="cb9-15"><a href="#cb9-15"></a>strat_df</span>
<span id="cb9-16"><a href="#cb9-16"></a></span>
<span id="cb9-17"><a href="#cb9-17"></a></span>
<span id="cb9-18"><a href="#cb9-18"></a>proc_df &lt;-<span class="st"> </span>proc_df <span class="op">%&gt;%</span></span>
<span id="cb9-19"><a href="#cb9-19"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(</span>
<span id="cb9-20"><a href="#cb9-20"></a>    <span class="dt">strategic =</span> <span class="kw"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span>(description, <span class="kw"><a href="https://stringr.tidyverse.org/reference/modifiers.html">regex</a></span>(<span class="st">'strategy|strategic|systemic'</span>, </span>
<span id="cb9-21"><a href="#cb9-21"></a>                                  <span class="dt">ignore_case=</span><span class="ot">TRUE</span>)</span>
<span id="cb9-22"><a href="#cb9-22"></a>              )</span>
<span id="cb9-23"><a href="#cb9-23"></a>  )</span>
<span id="cb9-24"><a href="#cb9-24"></a></span>
<span id="cb9-25"><a href="#cb9-25"></a></span>
<span id="cb9-26"><a href="#cb9-26"></a></span>
<span id="cb9-27"><a href="#cb9-27"></a></span>
<span id="cb9-28"><a href="#cb9-28"></a>proc_df2 &lt;-<span class="st"> </span>proc_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb9-29"><a href="#cb9-29"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(funding_org_name, strategic) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb9-30"><a href="#cb9-30"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(<span class="dt">total =</span> <span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(amount_awarded),</span>
<span id="cb9-31"><a href="#cb9-31"></a>            <span class="dt">mean =</span> <span class="kw"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(amount_awarded),</span>
<span id="cb9-32"><a href="#cb9-32"></a>            <span class="dt">median=</span> <span class="kw"><a href="https://rdrr.io/r/stats/median.html">median</a></span>(amount_awarded),</span>
<span id="cb9-33"><a href="#cb9-33"></a>            <span class="dt">n=</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/n.html">n</a></span>())</span>
<span id="cb9-34"><a href="#cb9-34"></a></span>
<span id="cb9-35"><a href="#cb9-35"></a>p6 &lt;-<span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(proc_df2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(strategic<span class="op">==</span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_n</a></span>(<span class="dv">10</span>, n),</span>
<span id="cb9-36"><a href="#cb9-36"></a>             <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> funding_org_name, <span class="dt">y =</span> mean, <span class="dt">fill =</span> strategic)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb9-37"><a href="#cb9-37"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span>(<span class="dt">position =</span> <span class="st">"dodge"</span>)</span>
<span id="cb9-38"><a href="#cb9-38"></a></span>
<span id="cb9-39"><a href="#cb9-39"></a>p6</span>
<span id="cb9-40"><a href="#cb9-40"></a></span>
<span id="cb9-41"><a href="#cb9-41"></a>strat_df &lt;-<span class="st"> </span>proc_df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(strategic)</span>
<span id="cb9-42"><a href="#cb9-42"></a></span>
<span id="cb9-43"><a href="#cb9-43"></a>strat_funders &lt;-<span class="st"> </span>strat_df <span class="op">%&gt;%</span></span>
<span id="cb9-44"><a href="#cb9-44"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(funding_org_name)  <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb9-45"><a href="#cb9-45"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(<span class="dt">strategic_funding =</span> <span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(amount_awarded),</span>
<span id="cb9-46"><a href="#cb9-46"></a>            <span class="dt">mean_strategic =</span> <span class="kw"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(amount_awarded),</span>
<span id="cb9-47"><a href="#cb9-47"></a>            <span class="dt">median_strategic =</span> <span class="kw"><a href="https://rdrr.io/r/stats/median.html">median</a></span>(amount_awarded),</span>
<span id="cb9-48"><a href="#cb9-48"></a>            <span class="dt">n_strategic =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/n.html">n</a></span>()) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">full_join</a></span>( proc_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb9-49"><a href="#cb9-49"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(amount_awarded <span class="op">&gt;=</span><span class="st"> </span><span class="dv">2500</span>) <span class="op">%&gt;%</span></span>
<span id="cb9-50"><a href="#cb9-50"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(funding_org_name) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb9-51"><a href="#cb9-51"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(<span class="dt">total_funding =</span> <span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(amount_awarded),</span>
<span id="cb9-52"><a href="#cb9-52"></a>            <span class="dt">mean_total =</span> <span class="kw"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(amount_awarded),</span>
<span id="cb9-53"><a href="#cb9-53"></a>            <span class="dt">median_total=</span> <span class="kw"><a href="https://rdrr.io/r/stats/median.html">median</a></span>(amount_awarded),</span>
<span id="cb9-54"><a href="#cb9-54"></a>            <span class="dt">n_total =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/n.html">n</a></span>())) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb9-55"><a href="#cb9-55"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">percent_strategic =</span> n_strategic<span class="op">/</span>n_total)</span>
<span id="cb9-56"><a href="#cb9-56"></a></span>
<span id="cb9-57"><a href="#cb9-57"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidyr)</span>
<span id="cb9-58"><a href="#cb9-58"></a></span>
<span id="cb9-59"><a href="#cb9-59"></a>strat_funders2 &lt;-<span class="st"> </span>strat_funders <span class="op">%&gt;%</span></span>
<span id="cb9-60"><a href="#cb9-60"></a><span class="st">  </span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span>(<span class="dt">cols =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(mean_strategic, mean_total)) <span class="op">%&gt;%</span></span>
<span id="cb9-61"><a href="#cb9-61"></a></span>
<span id="cb9-62"><a href="#cb9-62"></a></span>
<span id="cb9-63"><a href="#cb9-63"></a></span>
<span id="cb9-64"><a href="#cb9-64"></a>p7 &lt;-<span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="dt">data =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span>(</span>
<span id="cb9-65"><a href="#cb9-65"></a>  strat_funders <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_n</a></span>(<span class="dv">10</span>, n_strategic),</span>
<span id="cb9-66"><a href="#cb9-66"></a>  strat_funders <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_n</a></span>(<span class="dv">10</span>, mean_strategic),</span>
<span id="cb9-67"><a href="#cb9-67"></a>  strat_funders <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_n</a></span>(<span class="dv">10</span>, strategic_funding)) <span class="op">%&gt;%</span></span>
<span id="cb9-68"><a href="#cb9-68"></a><span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span>(), <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> funding_org_name, <span class="dt">colour =</span> strategic)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb9-69"><a href="#cb9-69"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span>()</span>
<span id="cb9-70"><a href="#cb9-70"></a>  <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_color_viridis_d</a></span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb9-71"><a href="#cb9-71"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_log10</a></span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb9-72"><a href="#cb9-72"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb9-73"><a href="#cb9-73"></a><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="dt">x =</span> <span class="st">"Award size as percentage of amount applied for"</span>,</span>
<span id="cb9-74"><a href="#cb9-74"></a>       <span class="dt">y =</span> <span class="st">"Number of Grants"</span>)</span>
<span id="cb9-75"><a href="#cb9-75"></a></span>
<span id="cb9-76"><a href="#cb9-76"></a>p7</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#retrieve-all-grants">Retrieve all grants</a></li>
      <li><a href="#core-data">Core data</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Evan Odell.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
